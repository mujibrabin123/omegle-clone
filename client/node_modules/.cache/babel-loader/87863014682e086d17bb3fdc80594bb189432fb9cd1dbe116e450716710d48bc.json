{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mujib\\\\omegle-clone\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport SimplePeer from \"simple-peer\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io(\"https://server-crimson-wildflower-4430.fly.dev\");\nfunction App() {\n  _s();\n  const [partnerId, setPartnerId] = useState(null);\n  const [searching, setSearching] = useState(false);\n  const [interests, setInterests] = useState(\"\");\n  const [commonInterests, setCommonInterests] = useState([]);\n  const [stream, setStream] = useState(null);\n  const [partnerStream, setPartnerStream] = useState(null);\n  const [myId, setMyId] = useState(\"\");\n\n  // Chat state.\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const peerRef = useRef(null);\n  useEffect(() => {\n    // Capture our socket ID.\n    socket.on(\"connect\", () => {\n      setMyId(socket.id);\n    });\n    socket.on(\"partnerFound\", ({\n      partnerId,\n      commonInterests\n    }) => {\n      setPartnerId(partnerId);\n      setCommonInterests(commonInterests);\n      setSearching(false);\n    });\n    socket.on(\"signal\", ({\n      signal,\n      from\n    }) => {\n      if (peerRef.current) {\n        peerRef.current.signal(signal);\n      }\n    });\n    socket.on(\"partnerDisconnected\", () => {\n      setPartnerId(null);\n      setCommonInterests([]);\n      if (peerRef.current) {\n        peerRef.current.destroy();\n        peerRef.current = null;\n      }\n      setPartnerStream(null);\n      alert(\"Your chat partner has disconnected.\");\n    });\n    socket.on(\"receiveMessage\", message => {\n      setMessages(prev => [...prev, {\n        sender: \"partner\",\n        text: message\n      }]);\n    });\n    return () => {\n      socket.off(\"connect\");\n      socket.off(\"partnerFound\");\n      socket.off(\"signal\");\n      socket.off(\"partnerDisconnected\");\n      socket.off(\"receiveMessage\");\n    };\n  }, []);\n\n  // Start video chat when both our socket ID and partner's ID are available.\n  useEffect(() => {\n    if (partnerId && myId && !peerRef.current) {\n      const initiator = myId < partnerId;\n      startVideoChat(initiator);\n    }\n  }, [partnerId, myId]);\n\n  // Interests are optional.\n  const findPartner = () => {\n    setSearching(true);\n    const interestList = interests.trim() ? interests.split(\",\").map(i => i.trim().toLowerCase()) : [];\n    socket.emit(\"findPartner\", interestList);\n  };\n\n  // startVideoChat with enhanced audio constraints and forced playback of remote stream.\n  const startVideoChat = async initiator => {\n    try {\n      const userStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          channelCount: 2\n        }\n      });\n      setStream(userStream);\n      if (userVideo.current) {\n        userVideo.current.srcObject = userStream;\n        userVideo.current.muted = true; // Mute local preview.\n      }\n      const peer = new SimplePeer({\n        initiator,\n        trickle: false,\n        // Disable trickle ICE for reliability.\n        stream: userStream,\n        config: {\n          iceServers: [{\n            urls: \"stun:stun.l.google.com:19302\"\n          }, {\n            urls: \"turn:numb.viagenie.ca\",\n            username: \"webrtc@live.com\",\n            credential: \"muazkh\"\n          }],\n          iceTransportPolicy: \"relay\"\n        }\n      });\n      peer.on(\"signal\", signal => {\n        socket.emit(\"signal\", {\n          partnerId,\n          signal\n        });\n      });\n      peer.on(\"stream\", remoteStream => {\n        console.log(\"Remote stream audio tracks:\", remoteStream.getAudioTracks().length);\n        setPartnerStream(remoteStream);\n        if (partnerVideo.current) {\n          partnerVideo.current.srcObject = remoteStream;\n          partnerVideo.current.muted = false;\n          partnerVideo.current.volume = 1.0;\n          partnerVideo.current.onloadedmetadata = () => {\n            partnerVideo.current.play().catch(err => console.error(\"Error playing remote stream:\", err));\n          };\n        }\n      });\n      peer.on(\"error\", err => console.error(\"Peer error:\", err));\n      peer.on(\"iceStateChange\", state => console.log(\"ICE state:\", state));\n      peer.on(\"connect\", () => console.log(\"Peer connected!\"));\n      peerRef.current = peer;\n    } catch (err) {\n      console.error(\"Error accessing media devices:\", err);\n    }\n  };\n  const sendMessage = () => {\n    if (newMessage.trim() === \"\") return;\n    socket.emit(\"sendMessage\", newMessage);\n    setMessages(prev => [...prev, {\n      sender: \"you\",\n      text: newMessage\n    }]);\n    setNewMessage(\"\");\n  };\n  const nextPartner = () => {\n    setPartnerId(null);\n    setCommonInterests([]);\n    setPartnerStream(null);\n    setMessages([]);\n    setNewMessage(\"\");\n    if (peerRef.current) {\n      peerRef.current.destroy();\n      peerRef.current = null;\n    }\n    socket.emit(\"nextPartner\");\n    findPartner();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container text-center mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-4\",\n      children: \"link UP - Interest Matching\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), !partnerId ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: interests,\n        onChange: e => setInterests(e.target.value),\n        placeholder: \"Enter interests (comma-separated) \\u2013 optional\",\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: findPartner,\n        disabled: searching,\n        className: \"btn btn-primary mt-3\",\n        children: searching ? \"Searching...\" : \"Find a Partner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this), searching && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted mt-2\",\n        children: \"Looking for a chat partner...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"mt-4\",\n        children: \"Common Interests:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: commonInterests.length > 0 ? commonInterests.join(\", \") : \"No common interests\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Your Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: userVideo,\n            autoPlay: true,\n            playsInline: true,\n            className: \"w-100 border border-primary rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Partner's Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: partnerVideo,\n            autoPlay: true,\n            playsInline: true,\n            className: \"w-100 border border-danger rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mt-4 p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: \"150px\",\n            overflowY: \"scroll\",\n            border: \"1px solid #ccc\",\n            padding: \"5px\",\n            marginBottom: \"10px\"\n          },\n          children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: msg.sender === \"you\" ? \"text-end\" : \"text-start\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: msg.sender === \"you\" ? \"badge bg-primary\" : \"badge bg-secondary\",\n              children: msg.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"Type a message...\",\n            value: newMessage,\n            onChange: e => setNewMessage(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-primary\",\n            onClick: sendMessage,\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center gap-3 mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"btn btn-danger\",\n          children: \"Disconnect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: nextPartner,\n          className: \"btn btn-warning\",\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"4ymg8Jx9COUigaqWsphNpzq6Uqg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","SimplePeer","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","App","_s","partnerId","setPartnerId","searching","setSearching","interests","setInterests","commonInterests","setCommonInterests","stream","setStream","partnerStream","setPartnerStream","myId","setMyId","messages","setMessages","newMessage","setNewMessage","userVideo","partnerVideo","peerRef","on","id","signal","from","current","destroy","alert","message","prev","sender","text","off","initiator","startVideoChat","findPartner","interestList","trim","split","map","i","toLowerCase","emit","userStream","navigator","mediaDevices","getUserMedia","video","audio","echoCancellation","noiseSuppression","autoGainControl","sampleRate","channelCount","srcObject","muted","peer","trickle","config","iceServers","urls","username","credential","iceTransportPolicy","remoteStream","console","log","getAudioTracks","length","volume","onloadedmetadata","play","catch","err","error","state","sendMessage","nextPartner","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","onClick","disabled","join","ref","autoPlay","playsInline","style","height","overflowY","border","padding","marginBottom","msg","index","window","location","reload","_c","$RefreshReg$"],"sources":["C:/Users/mujib/omegle-clone/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport SimplePeer from \"simple-peer\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nconst socket = io(\"https://server-crimson-wildflower-4430.fly.dev\");\n\nfunction App() {\n  const [partnerId, setPartnerId] = useState(null);\n  const [searching, setSearching] = useState(false);\n  const [interests, setInterests] = useState(\"\");\n  const [commonInterests, setCommonInterests] = useState([]);\n  const [stream, setStream] = useState(null);\n  const [partnerStream, setPartnerStream] = useState(null);\n  const [myId, setMyId] = useState(\"\");\n  \n  // Chat state.\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const peerRef = useRef(null);\n\n  useEffect(() => {\n    // Capture our socket ID.\n    socket.on(\"connect\", () => {\n      setMyId(socket.id);\n    });\n\n    socket.on(\"partnerFound\", ({ partnerId, commonInterests }) => {\n      setPartnerId(partnerId);\n      setCommonInterests(commonInterests);\n      setSearching(false);\n    });\n\n    socket.on(\"signal\", ({ signal, from }) => {\n      if (peerRef.current) {\n        peerRef.current.signal(signal);\n      }\n    });\n\n    socket.on(\"partnerDisconnected\", () => {\n      setPartnerId(null);\n      setCommonInterests([]);\n      if (peerRef.current) {\n        peerRef.current.destroy();\n        peerRef.current = null;\n      }\n      setPartnerStream(null);\n      alert(\"Your chat partner has disconnected.\");\n    });\n    \n    socket.on(\"receiveMessage\", (message) => {\n      setMessages((prev) => [...prev, { sender: \"partner\", text: message }]);\n    });\n\n    return () => {\n      socket.off(\"connect\");\n      socket.off(\"partnerFound\");\n      socket.off(\"signal\");\n      socket.off(\"partnerDisconnected\");\n      socket.off(\"receiveMessage\");\n    };\n  }, []);\n\n  // Start video chat when both our socket ID and partner's ID are available.\n  useEffect(() => {\n    if (partnerId && myId && !peerRef.current) {\n      const initiator = myId < partnerId;\n      startVideoChat(initiator);\n    }\n  }, [partnerId, myId]);\n\n  // Interests are optional.\n  const findPartner = () => {\n    setSearching(true);\n    const interestList = interests.trim()\n      ? interests.split(\",\").map((i) => i.trim().toLowerCase())\n      : [];\n    socket.emit(\"findPartner\", interestList);\n  };\n\n  // startVideoChat with enhanced audio constraints and forced playback of remote stream.\n  const startVideoChat = async (initiator) => {\n    try {\n      const userStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          channelCount: 2,\n        }\n      });\n      setStream(userStream);\n      if (userVideo.current) {\n        userVideo.current.srcObject = userStream;\n        userVideo.current.muted = true; // Mute local preview.\n      }\n      const peer = new SimplePeer({\n        initiator,\n        trickle: false, // Disable trickle ICE for reliability.\n        stream: userStream,\n        config: {\n          iceServers: [\n            { urls: \"stun:stun.l.google.com:19302\" },\n            { \n              urls: \"turn:numb.viagenie.ca\",\n              username: \"webrtc@live.com\",\n              credential: \"muazkh\"\n            }\n          ],\n          iceTransportPolicy: \"relay\"\n        },\n      });\n      peer.on(\"signal\", (signal) => {\n        socket.emit(\"signal\", { partnerId, signal });\n      });\n      peer.on(\"stream\", (remoteStream) => {\n        console.log(\"Remote stream audio tracks:\", remoteStream.getAudioTracks().length);\n        setPartnerStream(remoteStream);\n        if (partnerVideo.current) {\n          partnerVideo.current.srcObject = remoteStream;\n          partnerVideo.current.muted = false;\n          partnerVideo.current.volume = 1.0;\n          partnerVideo.current.onloadedmetadata = () => {\n            partnerVideo.current.play().catch((err) => console.error(\"Error playing remote stream:\", err));\n          };\n        }\n      });\n      peer.on(\"error\", (err) => console.error(\"Peer error:\", err));\n      peer.on(\"iceStateChange\", (state) => console.log(\"ICE state:\", state));\n      peer.on(\"connect\", () => console.log(\"Peer connected!\"));\n      peerRef.current = peer;\n    } catch (err) {\n      console.error(\"Error accessing media devices:\", err);\n    }\n  };\n\n  const sendMessage = () => {\n    if (newMessage.trim() === \"\") return;\n    socket.emit(\"sendMessage\", newMessage);\n    setMessages((prev) => [...prev, { sender: \"you\", text: newMessage }]);\n    setNewMessage(\"\");\n  };\n\n  const nextPartner = () => {\n    setPartnerId(null);\n    setCommonInterests([]);\n    setPartnerStream(null);\n    setMessages([]);\n    setNewMessage(\"\");\n    if (peerRef.current) {\n      peerRef.current.destroy();\n      peerRef.current = null;\n    }\n    socket.emit(\"nextPartner\");\n    findPartner();\n  };\n\n  return (\n    <div className=\"container text-center mt-5\">\n      <h2 className=\"mb-4\">link UP - Interest Matching</h2>\n      {!partnerId ? (\n        <div className=\"card p-4 shadow\">\n          <input\n            type=\"text\"\n            value={interests}\n            onChange={(e) => setInterests(e.target.value)}\n            placeholder=\"Enter interests (comma-separated) â€“ optional\"\n            className=\"form-control\"\n          />\n          <button onClick={findPartner} disabled={searching} className=\"btn btn-primary mt-3\">\n            {searching ? \"Searching...\" : \"Find a Partner\"}\n          </button>\n          {searching && <p className=\"text-muted mt-2\">Looking for a chat partner...</p>}\n        </div>\n      ) : (\n        <>\n          <h4 className=\"mt-4\">Common Interests:</h4>\n          <p className=\"text-muted\">\n            {commonInterests.length > 0 ? commonInterests.join(\", \") : \"No common interests\"}\n          </p>\n          <div className=\"row mt-4\">\n            <div className=\"col-md-6\">\n              <h5>Your Video</h5>\n              <video ref={userVideo} autoPlay playsInline className=\"w-100 border border-primary rounded\" />\n            </div>\n            <div className=\"col-md-6\">\n              <h5>Partner's Video</h5>\n              <video ref={partnerVideo} autoPlay playsInline className=\"w-100 border border-danger rounded\" />\n            </div>\n          </div>\n          {/* Chat Box */}\n          <div className=\"card mt-4 p-3\">\n            <h5>Chat</h5>\n            <div style={{ height: \"150px\", overflowY: \"scroll\", border: \"1px solid #ccc\", padding: \"5px\", marginBottom: \"10px\" }}>\n              {messages.map((msg, index) => (\n                <div key={index} className={msg.sender === \"you\" ? \"text-end\" : \"text-start\"}>\n                  <span className={msg.sender === \"you\" ? \"badge bg-primary\" : \"badge bg-secondary\"}>\n                    {msg.text}\n                  </span>\n                </div>\n              ))}\n            </div>\n            <div className=\"input-group\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder=\"Type a message...\"\n                value={newMessage}\n                onChange={(e) => setNewMessage(e.target.value)}\n              />\n              <button className=\"btn btn-outline-primary\" onClick={sendMessage}>\n                Send\n              </button>\n            </div>\n          </div>\n          <div className=\"d-flex justify-content-center gap-3 mt-4\">\n            <button onClick={() => window.location.reload()} className=\"btn btn-danger\">\n              Disconnect\n            </button>\n            <button onClick={nextPartner} className=\"btn btn-warning\">\n              Next\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}